(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{101:function(e,t,c){},120:function(e,t,c){},121:function(e,t,c){},122:function(e,t,c){},123:function(e,t,c){},124:function(e,t,c){},125:function(e,t,c){},126:function(e,t,c){},127:function(e,t,c){},128:function(e,t,c){},129:function(e,t,c){},130:function(e,t,c){},131:function(e,t,c){},161:function(e,t,c){},162:function(e,t,c){},163:function(e,t,c){},164:function(e,t,c){"use strict";c.r(t);var s=c(1),a=c.n(s),n=c(34),r=c.n(n),i=(c(88),c(89),c(181)),o=c(182),l=c(183),j=c(184),u=c(11),d=c(5),b=c(20),m=c(28),p=function(e,t){switch(t.type){case"LOGIN_START":return{user:null,isFetching:!0,error:!1};case"LOGIN_SUCCESS":return{user:t.payload,isFetching:!1,error:!1};case"LOGIN_FAILURE":return{user:null,isFetching:!1,error:!0};case"FOLLOW":return Object(m.a)(Object(m.a)({},e),{},{user:Object(m.a)(Object(m.a)({},e.user),{},{followings:[].concat(Object(b.a)(e.user.followings),[t.payload])})});case"UNFOLLOW":return Object(m.a)(Object(m.a)({},e),{},{user:Object(m.a)(Object(m.a)({},e.user),{},{followings:e.user.followings.filter((function(e){return e!==t.payload}))})});default:return e}},O=c(0),h={user:JSON.parse(localStorage.getItem("user"))||null,isFetching:!1,error:!1},x=Object(s.createContext)(h),f=function(e){var t=e.children,c=Object(s.useReducer)(p,h),a=Object(d.a)(c,2),n=a[0],r=a[1];return Object(s.useEffect)((function(){localStorage.setItem("user",JSON.stringify(n.user))}),[n.user]),Object(O.jsx)(x.Provider,{value:{user:n.user,isFetching:n.isFetching,error:n.error,dispatch:r},children:t})};function v(){var e=Object(s.useContext)(x).user,t="https://memoire-api-ady.herokuapp.com/images/";return Object(O.jsxs)("div",{className:"topbarContainer",children:[Object(O.jsx)("div",{className:"topbarLeft",children:Object(O.jsx)(u.b,{to:"/",style:{textDecoration:"none"},children:Object(O.jsx)("span",{className:"logo",children:"Anciens ULPGL"})})}),Object(O.jsx)("div",{className:"topbarCenter",children:Object(O.jsxs)("div",{className:"searchbar",children:[Object(O.jsx)(i.a,{className:"searchIcon"}),Object(O.jsx)("input",{placeholder:"Search for friend, post or video",className:"searchInput"})]})}),Object(O.jsxs)("div",{className:"topbarRight",children:[Object(O.jsxs)("div",{className:"topbarLinks",children:[Object(O.jsx)("span",{className:"topbarLink",children:"Homepage"}),Object(O.jsx)("span",{className:"topbarLink",children:"Timeline"})]}),Object(O.jsxs)("div",{className:"topbarIcons",children:[Object(O.jsxs)("div",{className:"topbarIconItem",children:[Object(O.jsx)(o.a,{}),Object(O.jsx)("span",{className:"topbarIconBadge",children:"1"})]}),Object(O.jsxs)("div",{className:"topbarIconItem",children:[Object(O.jsx)(l.a,{}),Object(O.jsx)("span",{className:"topbarIconBadge",children:"2"})]}),Object(O.jsxs)("div",{className:"topbarIconItem",children:[Object(O.jsx)(j.a,{}),Object(O.jsx)("span",{className:"topbarIconBadge",children:"1"})]})]}),Object(O.jsx)(u.b,{to:"/profile/".concat(e.username),children:Object(O.jsx)("img",{src:e.profilePicture?t+e.profilePicture:t+"person/noAvatar.png",alt:"",className:"topbarImg"})})]})]})}c(98);var g=c(185),N=c(186),w=c(187),I=c(188);c(99);function y(){return Object(O.jsx)("div",{className:"sidebar",children:Object(O.jsx)("div",{className:"sidebarWrapper",children:Object(O.jsxs)("ul",{className:"sidebarList",children:[Object(O.jsx)(u.b,{to:"/",style:{textDecoration:"none",color:"inherit"},children:Object(O.jsxs)("li",{className:"sidebarListItem",children:[Object(O.jsx)(g.a,{className:"sidebarIcon"}),Object(O.jsx)("span",{className:"sidebarListItemText",children:"Accueil"})]})}),Object(O.jsx)(u.b,{to:"/messenger",style:{textDecoration:"none",color:"inherit"},children:Object(O.jsxs)("li",{className:"sidebarListItem",children:[Object(O.jsx)(l.a,{className:"sidebarIcon"}),Object(O.jsx)("span",{className:"sidebarListItemText",children:"Chats"})]})}),Object(O.jsx)(u.b,{to:"/livre",style:{textDecoration:"none",color:"inherit"},children:Object(O.jsxs)("li",{className:"sidebarListItem",children:[Object(O.jsx)(N.a,{className:"sidebarIcon"}),Object(O.jsx)("span",{className:"sidebarListItemText",children:"Livres"})]})}),Object(O.jsx)(u.b,{to:"/offres",style:{textDecoration:"none",color:"inherit"},children:Object(O.jsxs)("li",{className:"sidebarListItem",children:[Object(O.jsx)(w.a,{className:"sidebarIcon"}),Object(O.jsx)("span",{className:"sidebarListItemText",children:"Offres d'emploi"})]})}),Object(O.jsx)(u.b,{to:"/evenement",style:{textDecoration:"none",color:"inherit"},children:Object(O.jsxs)("li",{className:"sidebarListItem",children:[Object(O.jsx)(I.a,{className:"sidebarIcon"}),Object(O.jsx)("span",{className:"sidebarListItemText",children:"Evennements"})]})})]})})})}var k=c(3),L=c.n(k),C=c(6),S=(c(101),c(189)),F=c(4),_=c.n(F),E=c(46);function R(e){var t=e.post,c=Object(s.useState)(t.likes.length),a=Object(d.a)(c,2),n=a[0],r=a[1],i=Object(s.useState)(!1),o=Object(d.a)(i,2),l=o[0],j=o[1],b=Object(s.useState)({}),m=Object(d.a)(b,2),p=m[0],h=m[1],f="https://memoire-api-ady.herokuapp.com/images/",v=Object(s.useContext)(x).user;Object(s.useEffect)((function(){j(t.likes.includes(v._id))}),[v._id,t.likes]),Object(s.useEffect)((function(){var e=function(){var e=Object(C.a)(L.a.mark((function e(){var c;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get("/api/user?userId=".concat(t.userId));case 2:c=e.sent,h(c.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t.userId]);var g=function(){try{_.a.put("/api/posts/"+t._id+"/like",{userId:v._id})}catch(e){}r(l?n-1:n+1),j(!l)};return Object(O.jsx)("div",{className:"post",children:Object(O.jsxs)("div",{className:"postWrapper",children:[Object(O.jsxs)("div",{className:"postTop",children:[Object(O.jsxs)("div",{className:"postTopLeft",children:[Object(O.jsx)(u.b,{to:"/profile/".concat(p.username),children:Object(O.jsx)("img",{className:"postProfileImg",src:p.profilePicture?f+p.profilePicture:f+"person/noAvatar.png",alt:""})}),Object(O.jsx)("span",{className:"postUsername",children:p.username}),Object(O.jsx)("span",{className:"postDate",children:Object(E.a)(t.createdAt)})]}),Object(O.jsx)("div",{className:"postTopRight",children:Object(O.jsx)(S.a,{})})]}),Object(O.jsxs)("div",{className:"postCenter",children:[Object(O.jsx)("span",{className:"postText",children:null===t||void 0===t?void 0:t.desc}),Object(O.jsx)("img",{className:"postImg",src:f+t.img,alt:""})]}),Object(O.jsxs)("div",{className:"postBottom",children:[Object(O.jsxs)("div",{className:"postBottomLeft",children:[Object(O.jsx)("img",{className:"likeIcon",src:"".concat(f,"like.png"),onClick:g,alt:""}),Object(O.jsx)("img",{className:"likeIcon",src:"".concat(f,"heart.png"),onClick:g,alt:""}),Object(O.jsxs)("span",{className:"postLikeCounter",children:[n," people like it"]})]}),Object(O.jsx)("div",{className:"postBottomRight",children:Object(O.jsxs)("span",{className:"postCommentText",children:[t.comment?"".concat(t.comment," comments"):"0 comment"," "]})})]})]})})}c(120);var D=c(190),T=c(191);function P(){var e=Object(s.useContext)(x).user,t="https://memoire-api-ady.herokuapp.com/images/",c=Object(s.useRef)(),a=Object(s.useState)(null),n=Object(d.a)(a,2),r=n[0],i=n[1],o=function(){var t=Object(C.a)(L.a.mark((function t(s){var a,n,i;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s.preventDefault(),a={userId:e._id,desc:c.current.value},!r){t.next=16;break}return n=new FormData,i=Date.now()+r.name,n.append("name",i),n.append("file",r),a.img=i,console.log(a),t.prev=9,t.next=12,_.a.post("/api/upload",n);case 12:t.next=16;break;case 14:t.prev=14,t.t0=t.catch(9);case 16:return t.prev=16,t.next=19,_.a.post("/api/posts",a);case 19:window.location.reload(),t.next=24;break;case 22:t.prev=22,t.t1=t.catch(16);case 24:case"end":return t.stop()}}),t,null,[[9,14],[16,22]])})));return function(e){return t.apply(this,arguments)}}();return Object(O.jsx)("div",{className:"share",children:Object(O.jsxs)("div",{className:"shareWrapper",children:[Object(O.jsxs)("div",{className:"shareTop",children:[Object(O.jsx)("img",{className:"shareProfileImg",src:e.profilePicture?t+e.profilePicture:t+"person/noAvatar.png",alt:""}),Object(O.jsx)("input",{placeholder:"\xc0 quoi penses - tu "+e.username+"?",className:"shareInput",ref:c})]}),Object(O.jsx)("hr",{className:"shareHr"}),r&&Object(O.jsxs)("div",{className:"shareImgContainer",children:[Object(O.jsx)("img",{className:"shareImg",src:URL.createObjectURL(r),alt:""}),Object(O.jsx)(D.a,{className:"shareCancelImg",onClick:function(){return i(null)}})]}),Object(O.jsxs)("form",{className:"shareBottom",onSubmit:o,children:[Object(O.jsx)("div",{className:"shareOptions",children:Object(O.jsxs)("label",{htmlFor:"file",className:"shareOption",children:[Object(O.jsx)(T.a,{htmlColor:"tomato",className:"shareIcon"}),Object(O.jsx)("span",{className:"shareOptionText",children:"Photo ou Video"}),Object(O.jsx)("input",{style:{display:"none"},type:"file",id:"file",accept:".png,.jpeg,.jpg",onChange:function(e){return i(e.target.files[0])}})]})}),Object(O.jsx)("button",{className:"shareButton",type:"submit",children:"Publier"})]})]})})}c(121);function B(e){var t=e.username,c=Object(s.useState)([]),a=Object(d.a)(c,2),n=a[0],r=a[1],i=Object(s.useContext)(x).user;return Object(s.useEffect)((function(){var e=function(){var e=Object(C.a)(L.a.mark((function e(){var c;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return e.next=3,_.a.get("/api/posts/profile/"+t);case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,_.a.get("/api/posts/timeline/"+i._id);case 8:e.t0=e.sent;case 9:c=e.t0,r(c.data.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t,i._id]),Object(O.jsx)("div",{className:"feed",children:Object(O.jsxs)("div",{className:"feedWrapper",children:[(!t||t===i.username)&&Object(O.jsx)(P,{}),n.map((function(e){return Object(O.jsx)(R,{post:e},e._id)}))]})})}c(122),c(123);var A=c(192),U=c(193);function W(e){var t=e.user,c="https://memoire-api-ady.herokuapp.com/images/",a=Object(s.useState)([]),n=Object(d.a)(a,2),r=n[0],i=n[1],o=Object(s.useContext)(x),l=o.user,j=o.dispatch,b=Object(s.useState)(l.followings.includes(null===t||void 0===t?void 0:t.id)),m=Object(d.a)(b,2),p=m[0],h=m[1];Object(s.useEffect)((function(){var e=function(){var e=Object(C.a)(L.a.mark((function e(){var c;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.a.get("/api/user/friends/"+t._id);case 3:c=e.sent,i(c.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[t]);var f=function(){var e=Object(C.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!p){e.next=7;break}return e.next=4,_.a.put("/api/user/".concat(t._id,"/follow"),{userId:l._id});case 4:j({type:"FOLLOW",payload:t._id}),e.next=10;break;case 7:return e.next=9,_.a.put("/api/user/".concat(t._id,"/unfollow"),{userId:l._id});case 9:j({type:"UNFOLLOW",payload:t._id});case 10:h(!p),e.next=15;break;case 13:e.prev=13,e.t0=e.catch(0);case 15:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),v=function(){return Object(O.jsx)(O.Fragment,{})},g=function(){return Object(O.jsxs)(O.Fragment,{children:[t.username!==l.username&&Object(O.jsxs)("button",{className:"rightbarFollowButton",onClick:f,children:[p?"Unfollow":"Follow",p?Object(O.jsx)(A.a,{}):Object(O.jsx)(U.a,{})]}),Object(O.jsx)("h4",{className:"rightbarTitle",children:"User information"}),Object(O.jsxs)("div",{className:"rightbarInfo",children:[Object(O.jsxs)("div",{className:"rightbarInfoItem",children:[Object(O.jsx)("span",{className:"rightbarInfoKey",children:"City:"}),Object(O.jsx)("span",{className:"rightbarInfoValue",children:t.city})]}),Object(O.jsxs)("div",{className:"rightbarInfoItem",children:[Object(O.jsx)("span",{className:"rightbarInfoKey",children:"From:"}),Object(O.jsx)("span",{className:"rightbarInfoValue",children:t.from})]}),Object(O.jsxs)("div",{className:"rightbarInfoItem",children:[Object(O.jsx)("span",{className:"rightbarInfoKey",children:"Relationship:"}),Object(O.jsx)("span",{className:"rightbarInfoValue",children:1===t.relationship?"Single":1===t.relationship?"Married":"-"})]})]}),Object(O.jsx)("h4",{className:"rightbarTitle",children:"User friends"}),Object(O.jsx)("div",{className:"rightbarFollowings",children:r.map((function(e){return Object(O.jsx)(u.b,{to:"/profile/"+e.username,style:{textDecoration:"none"},children:Object(O.jsxs)("div",{className:"rightbarFollowing",children:[Object(O.jsx)("img",{src:e.profilePicture?c+e.profilePicture:c+"person/noAvatar.png",alt:"",className:"rightbarFollowingImg"}),Object(O.jsx)("span",{className:"rightbarFollowingName",children:e.username})]})})}))})]})};return Object(O.jsx)("div",{className:"rightbar",children:Object(O.jsx)("div",{className:"rightbarWrapper",children:t?Object(O.jsx)(g,{}):Object(O.jsx)(v,{})})})}c(124);function G(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(v,{}),Object(O.jsxs)("div",{className:"homeContainer",children:[Object(O.jsx)(y,{}),Object(O.jsx)(B,{})]})]})}c(125);var q="https://memoire-api-ady.herokuapp.com",M=function(){var e=Object(C.a)(L.a.mark((function e(t,c){var s;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({type:"LOGIN_START"}),e.prev=1,e.next=4,_.a.post("".concat(q,"/auth/login"),t);case 4:s=e.sent,c({type:"LOGIN_SUCCESS",payload:s.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),c({type:"LOGIN_FAILURE",payload:e.t0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,c){return e.apply(this,arguments)}}(),V=c(194);function z(){var e=Object(s.useRef)(),t=Object(s.useRef)(),c=Object(s.useContext)(x),a=c.isFetching,n=c.dispatch;return Object(O.jsx)("div",{className:"login",children:Object(O.jsxs)("div",{className:"loginWrapper",children:[Object(O.jsxs)("div",{className:"loginLeft",children:[Object(O.jsx)("h6",{className:"loginLogo",children:"Anciens ULPGL | Alumni"}),Object(O.jsx)("span",{className:"loginDesc",children:"Connect with friends and the world around you on Anciens ULPGL."})]}),Object(O.jsx)("div",{className:"loginRight",children:Object(O.jsxs)("form",{className:"loginBox",onSubmit:function(c){c.preventDefault(),M({email:e.current.value,password:t.current.value},n)},children:[Object(O.jsx)("input",{placeholder:"Matricule",type:"text",required:!0,className:"loginInput",ref:e}),Object(O.jsx)("input",{placeholder:"Password",type:"password",required:!0,minLength:"6",className:"loginInput",ref:t}),Object(O.jsx)("button",{className:"loginButton",type:"submit",disabled:a,children:a?Object(O.jsx)(V.a,{color:"white",size:"20px"}):"Log In"}),Object(O.jsx)("span",{className:"loginForgot",children:"Forgot Password?"}),Object(O.jsx)("button",{className:"loginRegisterButton",children:a?Object(O.jsx)(V.a,{color:"white",size:"20px"}):"Create a New Account"})]})})]})})}c(126);var J=c(8);function K(){var e="https://memoire-api-ady.herokuapp.com/images/",t=Object(s.useState)({}),c=Object(d.a)(t,2),a=c[0],n=c[1],r=Object(J.h)().username;return Object(s.useEffect)((function(){var e=function(){var e=Object(C.a)(L.a.mark((function e(){var t;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get("/api/user?username=".concat(r));case 2:t=e.sent,n(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[r]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(v,{}),Object(O.jsxs)("div",{className:"profile",children:[Object(O.jsx)(y,{}),Object(O.jsxs)("div",{className:"profileRight",children:[Object(O.jsxs)("div",{className:"profileRightTop",children:[Object(O.jsxs)("div",{className:"profileCover",children:[Object(O.jsx)("img",{className:"profileCoverImg",src:a.coverPicture?e+a.coverPicture:e+"person/noCover.png",alt:""}),Object(O.jsx)("img",{className:"profileUserImg",src:a.profilePicture?e+a.profilePicture:e+"person/noAvatar.png",alt:""})]}),Object(O.jsxs)("div",{className:"profileInfo",children:[Object(O.jsx)("h4",{className:"profileInfoName",children:a.username}),Object(O.jsx)("span",{className:"profileInfoDesc",children:a.desc})]})]}),Object(O.jsxs)("div",{className:"profileRightBottom",children:[Object(O.jsx)(B,{username:r}),Object(O.jsx)(W,{user:a})]})]})]})]})}c(127);function H(){var e=Object(s.useRef)(),t=Object(s.useRef)(),c=Object(s.useRef)(),a=Object(s.useRef)(),n=Object(J.g)(),r=function(){var s=Object(C.a)(L.a.mark((function s(r){var i;return L.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(r.preventDefault(),a.current.value===c.current.value){s.next=5;break}a.current.setCustomValidity("Passwords don't match!"),s.next=16;break;case 5:return i={username:e.current.value,email:t.current.value,password:c.current.value},console.log(e,t,c,a),s.prev=7,s.next=10,_.a.post("".concat(q,"/auth/register"),i);case 10:n.push("/login"),s.next=16;break;case 13:s.prev=13,s.t0=s.catch(7),console.log(s.t0);case 16:case"end":return s.stop()}}),s,null,[[7,13]])})));return function(e){return s.apply(this,arguments)}}();return Object(O.jsx)("div",{className:"login",children:Object(O.jsxs)("div",{className:"loginWrapper",children:[Object(O.jsxs)("div",{className:"loginLeft",children:[Object(O.jsx)("h3",{className:"loginLogo",children:"Anciens ULPGL"}),Object(O.jsx)("span",{className:"loginDesc",children:"Connect with friends and the world around you on Anciens ULPGL."})]}),Object(O.jsx)("div",{className:"loginRight",children:Object(O.jsxs)("form",{className:"loginBox",onSubmit:r,children:[Object(O.jsx)("input",{placeholder:"Username",required:!0,ref:e,className:"loginInput",type:"text"}),Object(O.jsx)("input",{placeholder:"Matricule",required:!0,ref:t,className:"loginInput",type:"email"}),Object(O.jsx)("input",{placeholder:"Password",required:!0,ref:c,className:"loginInput",type:"password",minLength:"6"}),Object(O.jsx)("input",{placeholder:"Password Again",required:!0,ref:a,className:"loginInput",type:"password"}),Object(O.jsx)("button",{className:"loginButton",type:"submit",onClick:function(e){return console.log(r(e))},children:"Sign Up"}),Object(O.jsx)(u.b,{to:"/login",children:Object(O.jsx)("button",{className:"loginRegisterButton",children:"Log into Account"})})]})})]})})}c(128);var Q=c.p+"static/media/logo.6ce24c58.svg",X=function(e){var t=e.conversation,c=e.currentUser,a=Object(s.useState)([]),n=Object(d.a)(a,2),r=n[0],i=n[1],o=t.members.find((function(e){return e!==c._id}));return Object(s.useEffect)((function(){var e=function(){var e=Object(C.a)(L.a.mark((function e(){var t;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.a.get("".concat(q,"/api/user?userId=").concat(o));case 3:t=e.sent,i(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[c,t]),Object(O.jsxs)("div",{className:"conversation",children:[Object(O.jsx)("img",{className:"conversationImg",src:Q,alt:""}),Object(O.jsx)("span",{className:"conversationName",children:r.username})]})};c(129),c(130);var Y=function(e){var t=e.message,c=e.own;return Object(O.jsxs)("div",{className:c?"message own":"message",children:[Object(O.jsxs)("div",{className:"messageTop",children:[Object(O.jsx)("img",{className:"messageImg",src:Q,alt:""}),Object(O.jsx)("p",{className:"messageText",children:t.text})]}),Object(O.jsx)("div",{className:"messageBottom",children:Object(E.a)(t.createdAt)})]})};c(131);var Z=function(e){var t=e.onlineUsers,c=e.currentId,a=e.setCurrentChat,n=Object(s.useState)([]),r=Object(d.a)(n,2),i=r[0],o=r[1],l=Object(s.useState)([]),j=Object(d.a)(l,2),u=j[0],b=j[1];Object(s.useEffect)((function(){var e=function(){var e=Object(C.a)(L.a.mark((function e(){var t;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get("http://localhost:8800/api/user/friends/"+c);case 2:t=e.sent,o(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[c]),Object(s.useEffect)((function(){b(i.filter((function(e){return t.includes(e._id)})))}),[i,t]);var m=function(){var e=Object(C.a)(L.a.mark((function e(t){var s;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.a.get("http://localhost:8800/api/conversations/find/".concat(c,"/").concat(t._id));case 3:s=e.sent,a(s.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsx)("div",{className:"chatOnline",children:u.map((function(e){return Object(O.jsxs)("div",{className:"chatOnlineFriend",onClick:function(){m(e)},children:[Object(O.jsxs)("div",{className:"chatOnlineImgContainer",children:[Object(O.jsx)("img",{className:"chatOnlineImg",src:Q,alt:""}),Object(O.jsx)("div",{className:"chatOnlineBage"})]}),Object(O.jsx)("span",{className:"chatOnlineName",children:e.username})]})}))})},$=c(81);function ee(){var e=Object(s.useContext)(x).user,t=Object(s.useState)([]),c=Object(d.a)(t,2),a=c[0],n=c[1],r=Object(s.useState)(null),i=Object(d.a)(r,2),o=i[0],l=i[1],j=Object(s.useState)(""),u=Object(d.a)(j,2),m=u[0],p=u[1],h=Object(s.useState)(null),f=Object(d.a)(h,2),g=f[0],N=f[1],w=Object(s.useState)([]),I=Object(d.a)(w,2),y=I[0],k=I[1],S=Object(s.useState)([]),F=Object(d.a)(S,2),E=F[0],R=F[1],D=Object(s.useRef)(),T=Object(s.useRef)();Object(s.useEffect)((function(){T.current=Object($.io)("ws://localhost:8900"),T.current.on("getMessage",(function(e){N({sender:e.senderId,text:e.text,createdAt:Date.now()})}))}),[]),Object(s.useEffect)((function(){g&&(null===o||void 0===o?void 0:o.members.includes(g.sender))&&k((function(e){return[].concat(Object(b.a)(e),[g])}))}),[g,o]),Object(s.useEffect)((function(){T.current.emit("AddUser",e._id),T.current.on("getUsers",(function(t){R(e.followings.filter((function(e){return t.some((function(t){return t.userId===e}))})))}))}),[e]),Object(s.useEffect)((function(){var t=function(){var t=Object(C.a)(L.a.mark((function t(){var c;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.a.get("".concat(q,"/api/conversations/").concat(e._id));case 3:c=t.sent,n(c.data),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();t()}),[e._id]),Object(s.useEffect)((function(){var e=function(){var e=Object(C.a)(L.a.mark((function e(){var t;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.a.get("".concat(q,"/api/message/").concat(o._id));case 3:t=e.sent,k(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[o]);var P=function(){var t=Object(C.a)(L.a.mark((function t(c){var s,a,n;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.preventDefault(),s={sender:e._id,text:m,conversationId:o._id},a=o.members.find((function(t){return t!==e._id})),T.current.emit("sendMessage",{senderId:e._id,receiverId:a,text:m}),t.prev=4,t.next=7,_.a.post("".concat(q,"/api/message"),s);case 7:n=t.sent,k([].concat(Object(b.a)(y),[n.data])),p(""),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(4),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(e){return t.apply(this,arguments)}}();return Object(s.useEffect)((function(){var e;null===(e=D.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[y]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(v,{}),Object(O.jsxs)("div",{className:"messenger",children:[Object(O.jsx)("div",{className:"chatMenu",children:Object(O.jsxs)("div",{className:"chatMenuWrapper",children:[Object(O.jsx)("input",{placeholder:"Recherche d'amis ",className:"chatMenuInput"}),a.map((function(t){return Object(O.jsx)("div",{onClick:function(){return l(t)},children:Object(O.jsx)(X,{conversation:t,currentUser:e})})}))]})}),Object(O.jsx)("div",{className:"chatBox",children:Object(O.jsx)("div",{className:"chatBoxWrapper",children:o?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:"chatBoxTop",children:y.map((function(t){return Object(O.jsx)("div",{ref:D,children:Object(O.jsx)(Y,{message:t,own:t.sender===e._id})})}))}),Object(O.jsxs)("div",{className:"chatBoxBottom",children:[Object(O.jsx)("textarea",{className:"chatMessageInput",placeholder:"Write something ...",onChange:function(e){return p(e.target.value)},value:m}),Object(O.jsx)("button",{className:"chatSubmitButton",onClick:P,children:"Envoyer"})]})]}):Object(O.jsx)("span",{className:"noConversationText",children:"Ouvrez une conversation pour commencer le chat"})})}),Object(O.jsx)("div",{className:"chatOnline",children:Object(O.jsx)("div",{className:"chatOnlineWrapper",children:Object(O.jsx)(Z,{onlineUsers:E,currentId:e._id,setCurrentChat:l})})})]})]})}c(161);var te=c(165),ce=c(195);function se(){var e=Object(s.useState)([]),t=Object(d.a)(e,2),c=t[0],a=t[1],n=function(){var e=Object(C.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get("".concat(q,"/api/evenements")).then((function(e){a(e.data)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){n()}),[c]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(v,{}),Object(O.jsxs)("div",{className:"evenement",children:[Object(O.jsx)("div",{className:"sidebarevent",children:Object(O.jsx)(y,{})}),Object(O.jsx)("div",{className:"evenementpage",children:Object(O.jsx)(te.a,{elevation:3,style:{margin:20,padding:20},children:c.map((function(e){return Object(O.jsxs)("div",{className:"card border-0",children:[Object(O.jsxs)("div",{className:"card-body",children:[Object(O.jsx)("h1",{className:"card-title",children:e.Titre},e.Titre),Object(O.jsx)("p",{className:"card-text",children:e.desc},e.desc),Object(O.jsxs)("p",{className:"card-text1",children:[" ",Object(O.jsx)(ce.a,{}),"  ",new Date(e.dateEvenement).toLocaleString()]},e.dateEvenement)]}),Object(O.jsx)("img",{style:{height:350,width:"100%",objectFit:"cover"},src:"".concat(q,"/images/").concat(e.image),class:"card-img-bottom",alt:e.Titre},e.image)]})}))})}),Object(O.jsx)("div",{className:"rightevent",children:Object(O.jsx)(W,{})})]})]})}c(162);var ae=c(196),ne=c(199),re=c(197);function ie(){var e=Object(s.useState)([]),t=Object(d.a)(e,2),c=t[0],a=t[1],n=Object(s.useState)(null),r=Object(d.a)(n,2),i=r[0],o=r[1],l=Object(s.useRef)(),j=Object(s.useRef)(),u=Object(s.useContext)(x).user,b=Object(s.useRef)(),m=Object(s.useRef)(new Date),p=function(){var e=Object(C.a)(L.a.mark((function e(t){var c,s,a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),c={userId:u._id,Titre:j.current.value,desc:l.current.value,organisation:b.current.value,dateExpiration:m.current.value},!i){e.next=16;break}return s=new FormData,a=Date.now()+i.name,s.append("name",a),s.append("file",i),c.pdfLink=a,console.log(c),e.prev=9,e.next=12,_.a.post("".concat(q,"/api/livre/upload"),s);case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(9);case 16:return e.prev=16,e.next=19,_.a.post("".concat(q,"/api/offre/save"),c);case 19:window.location.reload(),e.next=24;break;case 22:e.prev=22,e.t1=e.catch(16);case 24:case"end":return e.stop()}}),e,null,[[9,14],[16,22]])})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(C.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get("".concat(q,"/api/offre")).then((function(e){a(e.data)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){h(),console.log(c)}),[]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(v,{}),Object(O.jsxs)("div",{className:"offres",children:[Object(O.jsx)("div",{className:"sidebaroffre",children:Object(O.jsx)(y,{})}),Object(O.jsxs)("div",{className:"offrecorp",children:[Object(O.jsx)("div",{className:"container",children:Object(O.jsx)(ae.a,{elevation:3,style:{padding:20,marginBottom:20},children:Object(O.jsx)("div",{className:"sendoffre",children:Object(O.jsx)("form",{onSubmit:p,children:Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("div",{className:"col-sm-6",children:Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("label",{htmlFor:"organisation",className:"col-sm-3 col-form-label",children:"Organisation"}),Object(O.jsx)("div",{class:"col-sm-9",children:Object(O.jsx)("input",{type:"text",ref:b,id:"organisation",className:"form-control form-control-sm mb-3"})}),Object(O.jsx)("label",{htmlFor:"poste",className:"col-sm-3 col-form-label",children:"Poste"}),Object(O.jsx)("div",{class:"col-sm-9",children:Object(O.jsx)("input",{type:"text",ref:j,id:"poste",className:"form-control form-control-sm mb-3"})}),Object(O.jsx)("label",{htmlFor:"desc",className:"col-sm-3 col-form-label",children:"Description"}),Object(O.jsx)("div",{class:"col-sm-9",children:Object(O.jsx)("input",{type:"text",ref:l,id:"desc",className:"form-control form-control-sm mb-3"})})]})}),Object(O.jsx)("div",{className:"col-sm-6",children:Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("label",{htmlFor:"dateExpiration",className:"col-sm-3 col-form-label",children:"Expire"}),Object(O.jsx)("div",{class:"col-sm-9",children:Object(O.jsx)("input",{type:"date",ref:m,id:"dateExpiration",className:"form-control form-control-sm mb-3"})}),Object(O.jsx)("label",{htmlFor:"ressources",className:"col-sm-3 col-form-label",children:"Ressource"}),Object(O.jsx)("div",{class:"col-sm-9",children:Object(O.jsx)("input",{type:"file",id:"ressources",className:"form-control form-control-sm mb-3",onChange:function(e){return o(e.target.files[0])}})}),Object(O.jsx)("div",{className:"col-sm-9 align-items-end",children:Object(O.jsx)("button",{type:"submit",className:"btn",style:{width:150,backgroundColor:"darkblue",color:"white"},children:"Publier"})})]})})]})})})})}),Object(O.jsx)("div",{className:"container",children:Object(O.jsxs)("table",{className:"table table-hover caption-top",children:[Object(O.jsx)("caption",{children:"Offres d'Emplois"}),Object(O.jsx)("thead",{children:Object(O.jsxs)("tr",{children:[Object(O.jsx)("th",{scope:"col",children:"Description"}),Object(O.jsx)("th",{scope:"col",children:"Poste"}),Object(O.jsx)("th",{scope:"col",children:"Organisation"}),Object(O.jsx)("th",{scope:"col",children:"Expire"}),Object(O.jsx)("th",{scope:"col",children:"Ressource"})]})}),Object(O.jsx)("tbody",{children:c.map((function(e){return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:e.desc}),Object(O.jsx)("td",{children:e.Titre}),Object(O.jsx)("th",{children:Object(O.jsx)("td",{children:e.organisation})}),Object(O.jsx)("td",{style:{color:"green",fontSize:20,fontWeight:600},children:new Date(e.dateExpiration).toLocaleDateString()}),Object(O.jsx)("td",{children:Object(O.jsx)("a",{style:{textDecoration:"none",cursor:"pointer"},href:"".concat(q,"/images/").concat(e.pdfLink),target:"_blank",rel:"noreferrer",children:Object(O.jsx)(ne.a,{style:{color:"orange"},startIcon:Object(O.jsx)(re.a,{}),children:"Download"})})})]})}))})]})})]})]})]})}c(163);var oe=c(198);function le(){var e=Object(s.useState)([]),t=Object(d.a)(e,2),c=t[0],a=t[1],n=Object(s.useState)(null),r=Object(d.a)(n,2),i=r[0],o=r[1],l=Object(s.useRef)(),j=Object(s.useRef)(),u=Object(s.useContext)(x).user,b=function(){var e=Object(C.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.a.get("".concat(q,"/api/livre")).then((function(e){a(e.data)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(C.a)(L.a.mark((function e(t){var c,s,a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),c={userId:u._id,Titre:j.current.value,desc:l.current.value},!i){e.next=16;break}return s=new FormData,a=Date.now()+i.name,s.append("name",a),s.append("file",i),c.couverture=a,console.log(c),e.prev=9,e.next=12,_.a.post("".concat(q,"/api/livre/upload"),s);case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(9);case 16:return e.prev=16,e.next=19,_.a.post("".concat(q,"/api/livre"),c);case 19:window.location.reload(),e.next=24;break;case 22:e.prev=22,e.t1=e.catch(16);case 24:case"end":return e.stop()}}),e,null,[[9,14],[16,22]])})));return function(t){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){b()}),[]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(v,{}),Object(O.jsxs)("div",{className:"livre",children:[Object(O.jsx)("div",{className:"livresidebar",children:Object(O.jsx)(y,{})}),Object(O.jsxs)("div",{className:"livrecorp",children:[Object(O.jsx)("div",{className:"container mb-3",children:Object(O.jsxs)("form",{onSubmit:m,className:"needs-validation",children:[Object(O.jsx)("h2",{children:"Publier un livre"}),Object(O.jsx)(te.a,{elevation:3,style:{padding:20,marginBottom:20},children:Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("div",{className:"col-sm-6",children:Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("label",{for:"exampleInputEmail1",class:"form-label col-sm-2",children:"Titre"}),Object(O.jsx)("div",{className:"col-sm-10 mb-3",children:Object(O.jsx)("input",{required:!0,ref:j,type:"text",class:"form-control",id:"exampleInputEmail1",placeholder:"Titre livre"})}),Object(O.jsx)("label",{for:"floatingTextarea",className:"col-sm-2",children:"Description"}),Object(O.jsx)("div",{className:"col-sm-10",children:Object(O.jsx)("textarea",{required:!0,ref:l,class:"form-control",placeholder:"Description du livre",id:"floatingTextarea"})})]})}),Object(O.jsx)("div",{className:"col-sm-6",children:Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("label",{for:"exampleInputPassword1",className:"form-label col-sm-2",children:"Ressource du livre"}),Object(O.jsx)("div",{class:"col-sm-10 mb-3",children:Object(O.jsx)("input",{required:!0,onChange:function(e){return o(e.target.files[0])},type:"file",class:"form-control",id:"exampleInputPassword1"})}),Object(O.jsx)("div",{className:"col-sm-12",children:Object(O.jsx)(ne.a,{style:{backgroundColor:"#304CA6",color:"#FFF",marginTop:"20px"},type:"submit",variant:"contained",startIcon:Object(O.jsx)(oe.a,{}),children:"Publier"})})]})})]})})]})}),Object(O.jsx)("div",{className:"container",children:Object(O.jsx)("div",{className:"row",children:c.map((function(e){return Object(O.jsx)("div",{className:"col-sm-4",children:Object(O.jsxs)("div",{className:"card",children:[Object(O.jsx)("img",{style:{height:"20rem",objectFit:"cover"},src:"".concat(q,"/images/").concat(e.couverture),className:"card-img-top",alt:e.couverture}),Object(O.jsxs)("div",{className:"card-body",children:[Object(O.jsx)("h5",{className:"card-title",children:e.Titre}),Object(O.jsx)("p",{className:"card-text",children:e.desc}),Object(O.jsx)("a",{href:"https://www.xl6.com/articles/extraits-1/9782755001136.pdf",target:"_blank",className:"btn btn-primary",children:"Extrait"})]})]})})}))})})]})]})]})}var je=function(){var e=Object(s.useContext)(x).user;return Object(O.jsx)(u.a,{children:Object(O.jsxs)(J.d,{children:[Object(O.jsx)(J.b,{exact:!0,path:"/",children:e?Object(O.jsx)(G,{}):Object(O.jsx)(H,{})}),Object(O.jsx)(J.b,{exact:!0,path:"/login",children:e?Object(O.jsx)(J.a,{to:"/"}):Object(O.jsx)(z,{})}),Object(O.jsx)(J.b,{exact:!0,path:"/register",children:e?Object(O.jsx)(J.a,{to:"/"}):Object(O.jsx)(H,{})}),Object(O.jsx)(J.b,{exact:!0,path:"/messenger",children:e?Object(O.jsx)(ee,{}):Object(O.jsx)(J.a,{to:"/"})}),Object(O.jsx)(J.b,{exact:!0,path:"/profile/:username",children:Object(O.jsx)(K,{})}),Object(O.jsx)(J.b,{exact:!0,path:"/livre",children:e?Object(O.jsx)(le,{}):Object(O.jsx)(J.a,{to:"/"})}),Object(O.jsx)(J.b,{exact:!0,path:"/offres",children:e?Object(O.jsx)(ie,{}):Object(O.jsx)(J.a,{to:"/"})}),Object(O.jsx)(J.b,{exact:!0,path:"/evenement",children:e?Object(O.jsx)(se,{}):Object(O.jsx)(J.a,{to:"/"})})]})})};r.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(f,{children:Object(O.jsx)(je,{})})}),document.getElementById("root"))},89:function(e,t,c){},98:function(e,t,c){},99:function(e,t,c){}},[[164,1,2]]]);
//# sourceMappingURL=main.13983082.chunk.js.map